<div class="col col-sm-offset-3">
  <div class="alert alert-info">
    <small
      >* 按<code>Enter</code>键来添加<code>主机</code>、<code>路径</code>、<code>方法</code>、<code>协议</code>、<code>SNI</code>、<code>来源</code>、<code>报头</code>和<code>目的地</code>的值</small
</small
    >
  </div>
</div>
<div class="form-group" ng-class="{'has-error' : errors.name}">
  <label class="col-sm-3 control-label"
    >名称 <br /><em><small class="help-block">可选</small></em></label
  >
  <div class="col-sm-9">
    <input ng-model="route.name" class="form-control" />
    <div
      class="text-danger"
      ng-if="errors.name"
      data-ng-bind="errors.name"
    ></div>
    <p class="help-block">
      路由的名称
    </p>
  </div>
</div>
<div class="form-group" ng-if="isGatewayVersionEqOrGreater('1.1.0-rc1')">
  <label class="col-sm-3 control-label"
    >标签 <br /><em><small class="help-block">可选</small></em></label
  >
  <div class="col-sm-9">
    <chips ng-model="route.tags">
      <chip-tmpl>
        <div class="default-chip">
          {{chip}}
          <i class="mdi mdi-close" remove-chip></i>
        </div>
      </chip-tmpl>
      <input
        ng-model-control
        data-ng-keypress="onTagInputKeyPress($event)"
        ng-model="$tag"
        uib-typeahead="tag for tag in tags | filter:$viewValue | limitTo:10"
      />
    </chips>
    <p class="help-block">
     路由的标签
    </p>
  </div>
</div>
<div class="form-group" ng-class="{'has-error' : errors.hosts}">
  <label class="col-sm-3 control-label"
    >主机 <br /><em><small class="help-block">半可选</small></em></label
  >
  <div class="col-sm-9">
    <chips ng-model="route.hosts">
      <chip-tmpl>
        <div class="default-chip">
          {{chip}}
          <i class="mdi mdi-close" remove-chip></i>
        </div>
      </chip-tmpl>
      <input chip-control />
    </chips>
    <!--<input ng-model="route.hosts" class="form-control">-->
    <div
      class="text-danger"
      ng-if="errors.hosts"
      data-ng-bind="errors.hosts"
    ></div>
    <p class="help-block">
      匹配路由的域名列表，如：example.com。<code>主机</code>、<code>路径</code>和<code>方法</code>中至少设置其中一个。
    </p>
  </div>
</div>
<div class="form-group" ng-class="{'has-error' : errors.paths}">
  <label class="col-sm-3 control-label"
    >路径 <br /><em><small class="help-block">半可选</small></em></label
  >
  <div class="col-sm-9">
    <chips ng-model="route.paths">
      <chip-tmpl>
        <div class="default-chip">
          {{chip}}
          <i class="mdi mdi-close" remove-chip></i>
        </div>
      </chip-tmpl>
      <input chip-control />
    </chips>
    <p class="help-block">
      匹配路由的路径，如：/my-path。<code>主机</code>、<code>路径</code>和<code>方法</code>中必须至少设置其中一个。
    </p>
  </div>
</div>

<div class="form-group" ng-class="{'has-error' : errors.headers}">
  <label class="col-sm-3 control-label"
    >报头 <br /><em
      ><small class="help-block">半可选</small></em
    ></label
  >
  <div class="col-sm-9">
    <chips ng-model="route.headers">
      <chip-tmpl>
        <div class="default-chip">
          {{chip}}
          <i class="mdi mdi-close" remove-chip></i>
        </div>
      </chip-tmpl>
      <input chip-control />
    </chips>
    <p class="help-block">一个或多个报头值，如果出现在请求中，将匹配该路由。
      不能使用主机头<code>Host</code>，如要匹配主机，请设置<code>主机</code>属性。<br>
      字段值示例：<code>x-some-header:foo,bar</code>
    </p>
  </div>
</div>

<div class="form-group" ng-class="{'has-error' : errors.path_handling}" ng-if="route.path_handling">
  <label class="col-sm-3 control-label">路径处理方式</label>
  <div class="col-sm-9">
    <select
      ng-model="route.path_handling"
      class="form-control pull-right"
      ng-options="item for item in ['v0', 'v1']"
    >
    </select>
    <p class="help-block">
      控制在向上游发送请求时服务路径、路由路径和请求路径的组合方式。参见上面对每个行为的详细描述。可用值为：<code>"v0"</code>, <code>"v1"</code>，默认
      <code>v1</code>。
    </p>
  </div>
</div>

<div
  class="form-group"
  ng-class="{'has-error' : errors.https_redirect_status_code}"
>
  <label class="col-sm-3 control-label"
    >HTTPS重定向状态码 <br /><em
      ><small class="help-block">可选</small></em
    ></label
  >
  <div class="col-sm-9">
    <input
      type="number"
      class="form-control"
      ng-model="route.https_redirect_status_code"
    />
    <p class="help-block">
      当路由的所有属性都匹配时，Kong会响应该状态码，除非设置的请求协议是<code>HTTP</code>而不是<code>HTTPS</code>。
      当字段值设为301、302、307或308时，Kong会自动注入<code>Location</code>报头。 默认<code>426</code>。
    </p>
  </div>
</div>
<div class="form-group" ng-class="{'has-error' : errors.regex_priority}">
  <label class="col-sm-3 control-label"
    >正则优先 <br /><em
      ><small class="help-block">可选</small></em
    ></label
  >
  <div class="col-sm-9">
    <input type="number" class="form-control" ng-model="route.regex_priority" />
    <p class="help-block">
      A number used to choose which route resolves a given request when several
      routes match it using regexes simultaneously. When two routes match the
      path and have the same <code>regex_priority</code>, the older one (lowest
      <code>created_at</code>) is used. Note that the priority for non-regex
      routes is different (longer non-regex routes are matched before shorter
      ones). Defaults to <code>0</code>.
    </p>
  </div>
</div>
<div class="form-group" ng-class="{'has-error' : errors.methods}">
  <label class="col-sm-3 control-label"
    >方法 <br /><em
      ><small class="help-block">半可选</small></em
    ></label
  >
  <div class="col-sm-9">
    <chips ng-model="route.methods">
      <chip-tmpl>
        <div class="default-chip">
          {{chip}}
          <i class="mdi mdi-close" remove-chip></i>
        </div>
      </chip-tmpl>
      <input chip-control />
    </chips>
    <p class="help-block">
      A list of HTTP methods that match this Route. At least one of
      <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be
      set.
    </p>
  </div>
</div>
<div class="form-group">
  <label class="col-sm-3 control-label"
    >去除路径 <br /><em><small class="help-block">可选</small></em></label
  >
  <div class="col-sm-9">
    <input
      bs-switch
      ng-model="route.strip_path"
      switch-size="small"
      type="checkbox"
      switch-on-text="YES"
      switch-off-text="NO"
    />
    <p class="help-block">
      When matching a Route via one of the <code>paths</code>, strip the
      matching prefix from the upstream request URL.
    </p>
  </div>
</div>
<div class="form-group">
  <label class="col-sm-3 control-label"
    >保护主机 <br /><em
      ><small class="help-block">可选</small></em
    ></label
  >
  <div class="col-sm-9">
    <input
      bs-switch
      ng-model="route.preserve_host"
      switch-size="small"
      type="checkbox"
      switch-on-text="YES"
      switch-off-text="NO"
    />
    <p class="help-block">
      When matching a Route via one of the <code>hosts</code> domain names, use
      the request <code>Host</code> header in the upstream request headers. By
      default set to <code>false</code>, and the upstream Host header will be
      that of the Service's <code>host</code>
    </p>
  </div>
</div>
<div class="form-group" ng-class="{'has-error' : errors.protocols}">
  <label class="col-sm-3 control-label"
    >协议 <br /><em
      ><small class="help-block">半可选</small></em
    ></label
  >
  <div class="col-sm-9">
    <chips ng-model="route.protocols">
      <chip-tmpl>
        <div class="default-chip">
          {{chip}}
          <i class="mdi mdi-close" remove-chip></i>
        </div>
      </chip-tmpl>
      <input chip-control />
    </chips>
    <p class="help-block">
      A list of the protocols this Route should allow. By default it is
      <code>["http", "https"]</code>, which means that the Route accepts both.
      When set to <code>["https"]</code>, HTTP requests are answered with a
      request to upgrade to HTTPS.
    </p>
  </div>
</div>

<div class="form-group" ng-class="{'has-error' : errors.snis}">
  <label class="col-sm-3 control-label"
    >SNIs <br /><em><small class="help-block">半可选</small></em></label
  >
  <div class="col-sm-9">
    <chips ng-model="route.snis">
      <chip-tmpl>
        <div class="default-chip">
          {{chip}}
          <i class="mdi mdi-close" remove-chip></i>
        </div>
      </chip-tmpl>
      <input chip-control />
    </chips>
    <p class="help-block">
      A list of SNIs that match this Route when using stream routing. When using
      <code>tcp</code> or <code>tls</code> protocols, at least one of
      <code>snis</code>, <code>sources</code>, or <code>destinations</code> must
      be set.
    </p>
  </div>
</div>
<div class="form-group" ng-class="{'has-error' : errors.sources}">
  <label class="col-sm-3 control-label"
    >来源地 <br /><em
      ><small class="help-block">半可选</small></em
    ></label
  >
  <div class="col-sm-9">
    <chips ng-model="route.sources">
      <chip-tmpl>
        <div class="default-chip">
          {{chip}}
          <i class="mdi mdi-close" remove-chip></i>
        </div>
      </chip-tmpl>
      <input chip-control />
    </chips>
    <p class="help-block">
      A list of IP sources of incoming connections that match this Route when
      using stream routing. Each entry is an object with fields “ip” (optionally
      in CIDR range notation) and/or “port”. When using <code>tcp</code> or
      <code>tls</code> protocols, at least one of <code>snis</code>,
      <code>sources</code>, or <code>destinations</code> must be set.
      <br />
      <code
        >The field expects values with ip:port format. ex:
        192.168.1.2:3000</code
      >
    </p>
  </div>
</div>
<div class="form-group" ng-class="{'has-error' : errors.destinations}">
  <label class="col-sm-3 control-label"
    >目的地 <br /><em
      ><small class="help-block">半可选</small></em
    ></label
  >
  <div class="col-sm-9">
    <chips ng-model="route.destinations">
      <chip-tmpl>
        <div class="default-chip">
          {{chip}}
          <i class="mdi mdi-close" remove-chip></i>
        </div>
      </chip-tmpl>
      <input chip-control />
    </chips>
    <p class="help-block">
      A list of IP destinations of incoming connections that match this Route
      when using stream routing. Each entry is an object with fields “ip”
      (optionally in CIDR range notation) and/or “port”. When using
      <code>tcp</code> or <code>tls</code> protocols, at least one of
      <code>snis</code>, <code>sources</code>, or <code>destinations</code> must
      be set.
      <br />
      <code
        >The field expects values with ip:port format. ex:
        192.168.1.2:3000</code
      >
    </p>
  </div>
</div>
