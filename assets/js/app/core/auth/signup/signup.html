<p class="help-block">注册</p>
<br /><br />

<div class="alert alert-success text-center" ng-if="showActivationMessage">
  <i class="mdi mdi-check-circle-outline mdi-48px"></i>
  <div class="clearfix"></div>
  <h3 class="">很好！</h3>
  <p>我们已经将激活链接发到您的邮箱<strong>{{user.email}}</strong></p>
</div>

<form
  name="loginForm"
  method="post"
  novalidate="novalidate"
  ng-if="!showActivationMessage"
>
  <div
    class="form-group"
    data-show-errors
    ng-class="{'has-error' : errors.username}"
  >
    <!--<label class="control-label no-margin">Username <span class="text-danger text-small">*</span></label>-->

    <div class="input-group">
      <span class="input-group-addon">
        <i class="mdi mdi-account-circle"></i>
      </span>
      <input
        type="text"
        name="username"
        class="form-control username"
        placeholder="用户名"
        autocomplete="off"
        required="required"
        data-ng-model="user.username"
      />
    </div>

    <p
      class="help-block no-margin text-left"
      ng-show="loginForm.username.$touched && loginForm.username.$error.required"
    >
      用户名是必填项。
    </p>
    <p
      class="help-block no-margin text-left"
      ng-show="loginForm.username.$error.custom"
    >
      {{loginForm.username.$error.custom}}
    </p>
  </div>

  <div
    class="form-group"
    ng-class="{'has-error' : errors.email}"
    data-show-errors
  >
    <!--<label class="control-label no-margin">Email <span class="text-danger text-small">*</span></label>-->
    <div class="input-group">
      <span class="input-group-addon">
        <i class="mdi mdi-email-outline"></i>
      </span>
      <input
        type="email"
        name="email"
        class="form-control password"
        placeholder="邮箱地址"
        required="required"
        data-ng-model="user.email"
      />
    </div>

    <p
      class="help-block no-margin text-left"
      ng-show="loginForm.email.$touched && loginForm.email.$error.required"
    >
      邮箱是必填项。
    </p>
    <p
      class="help-block no-margin text-left"
      ng-show="loginForm.email.$touched && loginForm.email.$invalid"
    >
      邮箱无效。
    </p>
  </div>
  <div
    class="form-group"
    data-show-errors
    ng-class="{'has-error' : errors.password}"
  >
    <!--<label class="control-label no-margin">Password <span class="text-danger text-small">*</span></label>-->

    <div class="input-group">
      <span class="input-group-addon">
        <i class="mdi mdi-lock-outline"></i>
      </span>
      <input
        autocomplete="new-password"
        type="password"
        name="password"
        class="form-control password"
        placeholder="密码"
        required="required"
        data-ng-model="user.passports.password"
      />
    </div>

    <p
      class="help-block no-margin text-left"
      ng-show="loginForm.password.$touched && loginForm.password.$error.required"
    >
      密码是必填项。
    </p>
  </div>
  <div
    class="form-group"
    ng-class="{'has-error' : errors.password_confirmation}"
    data-show-errors="{ trigger: 'keypress' }"
  >
    <!--<label class="control-label no-margin">Password confirmation <span-->
    <!--class="text-danger text-small">*</span></label>-->

    <div class="input-group">
      <span class="input-group-addon">
        <i class="mdi mdi-check-circle-outline"></i>
      </span>
      <input
        ng-pattern="user.passports.password"
        autocomplete="new-password"
        type="password"
        name="password_confirmation"
        class="form-control password"
        placeholder="确认密码"
        required="required"
        data-ng-model="user.password_confirmation"
      />
    </div>

    <div
      ng-messages="loginForm.password_confirmation.$error"
      ng-if="loginForm.password_confirmation.$dirty && loginForm.password_confirmation.$invalid"
    >
      <p class="help-block no-margin text-left" ng-message="required">
        确认密码是必填项。
      </p>
      <p class="help-block no-margin text-left" ng-message="pattern">
        密码与确认密码不匹配。
      </p>
    </div>
    <br />
  </div>

  <div class="form-group">
    <button
      class="btn btn-primary btn-block"
      data-ng-click="signup()"
      data-ng-disabled="!loginForm.$valid || busy"
    >
      注册
    </button>
  </div>
</form>
<p class="text-center text-small help-block">
  返回<a ui-sref="auth.login">登录</a>。
</p>
